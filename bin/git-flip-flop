#!/usr/bin/env python

import argparse
import os
import sys
import time

parser = argparse.ArgumentParser(description='Flip between two or more revisions on a periodic cycle')
parser.add_argument('--interval', '-i', type=int, default=2, help='The interval in seconds between successive checkouts')
parser.add_argument('revisions', metavar='REV', nargs='+', help='The revisions to check out')
args = parser.parse_args()

if len(args.revisions) == 1:
    print "You must supply two or more revisions to work with"
    sys.exit(1)

revision_index = 0
while True:
    revision = args.revisions[revision_index]
    revision_index += 1
    if revision_index >= len(args.revisions):
        revision_index = 0

    # git checkout revision
    os.system('git checkout %s' % (revision))
    time.sleep(args.interval)
